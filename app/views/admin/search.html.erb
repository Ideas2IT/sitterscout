<div id="content">
	<div id="sub_menu_gradient">
		<%= render :partial => 'admin_menu' %>
	</div>

	<% remote_form_for :users, :url => {:action => :search_users}, :loading => "Element.show('search_spinner');Element.hide('search_results')", :complete => "Element.hide('search_spinner');Element.show('search_results')" do |f| %>
	
		<table>
			<tr>
					<td><label for="profile_email">Email:</label></td>

					<td><input id="users_email" name="users[email]" size="30" type="text" /></td>
			</tr>

			<tr>
					<td><label for="profile_first_name">First Name:</label></td>
					<td><input id="users_first_name" name="users[first_name]" size="30" type="text" /></td>
			</tr>
			<tr>
					<td><label for="profile_last_name">Last Name:</label></td>

					<td><input id="users_last_name" name="users[last_name]" size="30" type="text" /></td>
			</tr>
			<tr>
					<td><label for="profile_address_1">Address 1:</label></td>
					<td><input id="users_address_1" name="users[address_1]" size="30" type="text" /></td>
			</tr>
			<tr>
					<td><label for="profile_address_2">Address 2:</label></td>

					<td><input id="users_address_2" name="users[address_2]" size="30" type="text" /></td>
			</tr>
			<tr>
					<td><label for="profile_city">City:</label></td>
					<td><input id="users_city" name="users[city]" size="30" type="text" /></td>
			</tr>
			<tr>
				<td><label for="profile_state">State:</label></td>

				<td><select id="users_state_id" name="users[state_id]"><option value=""></option>
	<option value="1">AL</option>
	<option value="2">AK</option>
	<option value="3">AZ</option>
	<option value="4">AR</option>
	<option value="5">CA</option>
	<option value="6">CO</option>
	<option value="7">CT</option>
	<option value="8">DE</option>

	<option value="9">DC</option>
	<option value="10">FL</option>
	<option value="11">GA</option>
	<option value="12">HI</option>
	<option value="13">ID</option>
	<option value="14">IL</option>
	<option value="15">IN</option>
	<option value="16">IA</option>
	<option value="17">KS</option>

	<option value="18">KY</option>
	<option value="19">LA</option>
	<option value="20">ME</option>
	<option value="21">MD</option>
	<option value="22">MA</option>
	<option value="23">MI</option>
	<option value="24">MN</option>
	<option value="25">MS</option>
	<option value="26">MO</option>

	<option value="27">MT</option>
	<option value="28">NE</option>
	<option value="29">NV</option>
	<option value="30">NH</option>
	<option value="31">NJ</option>
	<option value="32">NM</option>
	<option value="33">NY</option>
	<option value="34">NC</option>
	<option value="35">ND</option>

	<option value="36">OH</option>
	<option value="37">OK</option>
	<option value="38">OR</option>
	<option value="39">PA</option>
	<option value="40">RI</option>
	<option value="41">SC</option>
	<option value="42">SD</option>
	<option value="43">TN</option>
	<option value="44">TX</option>

	<option value="45">UT</option>
	<option value="46">VT</option>
	<option value="47">VA</option>
	<option value="48">WA</option>
	<option value="49">WV</option>
	<option value="50">WI</option>
	<option value="51">WY</option></select></td>
			</tr>
			<tr>

				<td><label for="profile_zip">Zip Code:</label></td>
				<td><input id="users_zip" name="users[zip]" size="30" type="text" /></td>
			</tr>
			<tr>
				<td valign="top">User type:</td>
				<td>
					<input type="radio" name="users[user_type]" id="users_user_type_0" value="all" checked='checked' /> All<br />

					<input type="radio" name="users[user_type]" id="users_user_type_1" value="parents" /> Parents<br />
					<input type="radio" name="users[user_type]" id="users_user_type_2" value="sitters" /> Sitters

			</tr>
			<tr>
				<td colspan="2">&nbsp;</td>
			</tr>
			<tr>
				<td><input name="commit" type="submit" value="Search Users" /><% end %></td>

				<td><input type="button" value="Export" onclick="export_to_csv();" /></td>
			</tr>
		</table>
	<script type="text/javascript">
	function export_to_csv()
	{
		
		var params = new Hash();
		params.set('users[email]', $('users_email').value);
		params.set('users[first_name]', $('users_first_name').value);
		params.set('users[last_name]', $('users_last_name').value);
		params.set('users[address_1]', $('users_address_1').value);
		params.set('users[address_2]', $('users_address_2').value);
		params.set('users[city]', $('users_city').value);
		params.set('users[state_id]', $('users_state_id').value);
		params.set('users[zip]', $('users_zip').value);
		
				
		if($('users_user_type_0').checked)
			params.set("users[user_type]", 'all');
		else if($('users_user_type_1').checked)
			params.set("users[user_type]", 'parents');
		else
			params.set("users[user_type]", 'sitters');
			
		
		window.open("/admin/export_users?" + params.toQueryString());
		
	}
	
	</script>
	
	<div id="search_spinner" style="display: none">
		<img src="/images/spinner.gif"> Loading Users....
	</div>


	<div id="search_results">
		<%= render :partial => 'search_results' %>
	</div>
	
</div>

<%#= render :partial => 'admin_info' %>


<script type="text/javascript">
function change_background_color(id, color){
	$(id).style.backgroundColor = color;
}
</script>